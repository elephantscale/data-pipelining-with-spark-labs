<p><link rel='stylesheet' href='../assets/css/main.css'/></p>
<h1 id="spark-and-yarn">Spark and YARN</h1>
<h2 id="objective">Objective</h2>
<p>YARN is the cluster manager for Hadoop. In order to run Spark jobs on a Hadoop cluster it needs to interact with YARN</p>
<h2 id="what-you-will-learn">What you will learn</h2>
<ul>
<li>Understand YARN</li>
<li>Spark and YARN</li>
</ul>
<h2 id="knowledge-check">Knowledge Check</h2>
<p><strong>What are the components of YARN cluster?</strong></p>
<p><strong>How do you submit a Spark job to YARN?</strong></p>
<p><strong>What is the different between ‘client mode’ and ‘cluster mode’?</strong></p>
<p><strong>How do we submit Spark applications in client mode and cluster mode?</strong></p>
<p><strong>What are some of settings that affect Spark jobs with YARN?</strong></p>
<h2 id="essential-reading">Essential Reading</h2>
<h3 id="yarn">YARN</h3>
<ul>
<li><a href="https://learning.oreilly.com/library/view/hadoop-the-definitive/9781491901687/ch04.html">Chapter 4. YARN</a> of the book <a href="https://learning.oreilly.com/library/view/hadoop-the-definitive">Hadoop: The Definitive Guide, 4th Edition</a> by Tom White - a good overview of YARN</li>
</ul>
<h3 id="spark-and-yarn-1">Spark and YARN</h3>
<h4 id="spark-and-yarn-interaction">Spark and YARN interaction</h4>
<p><img src="../assets/images/spark-architecture-1.png" style="width:90%;"></p>
<h4 id="yarn-client-mode">YARN Client mode</h4>
<p>Used for interactive development and debugging</p>
<p><img src="../assets/images/spark-yarn-1.png" style="width:90%;"></p>
<h4 id="yarn-cluster-mode">YARN cluster mode</h4>
<p>Non interactive runs (production). Note the difference where ‘driver’ is running.</p>
<p><img src="../assets/images/spark-yarn-2.png" style="width:90%;"></p>
<h4 id="references">References</h4>
<ul>
<li><a href="http://spark.apache.org/docs/latest/running-on-yarn.html">Running Spark on YARN</a> from Spark documentation gives a good overview of Spark and YARN and describes various configurations</li>
<li><a href="https://sparkbyexamples.com/spark/spark-submit-command/">Examples of Spark-submit command</a> by Spark By Examples has good practical examples of commands</li>
</ul>
<h2 id="extra-reading">Extra Reading</h2>
<ul>
<li><a href="https://learning.oreilly.com/library/view/learning-spark-2nd/9781492050032/ch07.html">Chapter 7. Optimizing and Tuning Spark Applications</a> from book <a href="https://learning.oreilly.com/library/view/learning-spark-2nd/9781492050032/">Learning Spark - 2nd Edition</a> has good optimization techniques. Specially read the section on <strong>static versus dynamic resource allocation</strong></li>
</ul>
<h2 id="labs">Labs</h2>
<h3 id="lab-1-submiting-a-spark-job-to-yarn">Lab-1: Submiting a Spark job to YARN</h3>
<ul>
<li>This lab will test Spark and YARN connectivity</li>
<li>Follow these lab instructions (TODO)</li>
</ul>
<h3 id="lab-2-tune-spark-job-with-yarn">Lab-2: Tune Spark job with YARN</h3>
<ul>
<li>In this lab, you will submit a Spark job</li>
<li>And tune memory settings to optimize runtime</li>
</ul>
<h2 id="review-and-key-takeaways">Review and Key Takeaways</h2>
<p>After completing this chapter</p>
<ul>
<li>You should be able to answer the ‘Knowledge Check’ questions comfortably (see start of the document)</li>
<li>Comfortable with Spark and YARN</li>
</ul>
